<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <title>Calculadora Ventas con Tarjeta</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Ícono del sitio -->
    <link rel="icon" href="images/card.ico" type="image/x-icon">

    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            background: #D9DAD4;
            color: #222;
            padding: 24px;
        }

        header {
            background: #303030;
            color: #F5F1E8;
            padding: 20px;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            position: relative;
        }

        .panel {
            max-width: 100%;
            margin: 0 auto;
            background: #F5F1E8;
            border-radius: 10px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
            padding: 20px;
        }

        h1 {
            margin: 0 0 12px 0;
            font-size: 20px;
        }

        .controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 16px;
            align-items: end;
        }

        .controls label {
            display: block;
            font-size: 13px;
            margin-bottom: 6px;
            color: #444;
        }

        .control {
            display: flex;
            flex-direction: column;
        }

        input[type="number"],
        input[type="text"],
        select {
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid #d0d6dc;
            width: 180px;
            box-sizing: border-box;
            font-size: 14px;
        }

        button {
            background: #BEA167;
            color: #fff;
            border: none;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        button.secondary {
            background: #303030;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
            font-size: 14px;
        }

        th,
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #e6e9ed;
            text-align: right;
            vertical-align: middle;
        }

        th:first-child,
        td:first-child {
            text-align: left;
            width: 160px;
        }

        th {
            background: #fafbfc;
            font-weight: 600;
            color: #333;
            font-size: 13px;
        }

        .small {
            font-size: 12px;
            color: #666;
        }

        /* read-only styling */
        input[readonly] {
            background: transparent;
            border: none;
            color: inherit;
        }

        /* responsive */
        @media (max-width: 880px) {
            .controls {
                flex-direction: column;
            }

            input[type="number"],
            input[type="text"] {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <header>
        <span id="header_nombre">MDP SOLUCIONES</span>
    </header>
    <div class="panel">
        <h1>Calculadora Ventas con Tarjeta</h1>

        <div class="controls">
            <div class="control">
                <label>Producto</label>
                <input id="producto" type="text" value="" />
            </div>

            <div class="control">
                <label>Valor en USD</label>
                <input id="usd" type="number" step="1" value="500" />
            </div>

            <div class="control">
                <label>Dólar blue (venta)</label>
                <input id="dolar" type="number" step="1" value="1450" />
            </div>

            <div class="control">
                <label>Transferencia (%)</label>
                <input id="transferPct" type="number" step="0.1" value="3" />
            </div>

            <div class="control">
                <label>IVA (%)</label>
                <input id="ivaPct" type="number" step="0.1" value="10.5" />
            </div>

            <div class="control">
                <label>IIBB (%)</label>
                <input id="iibbPct" type="number" step="0.1" value="3.5" />
            </div>

            <div style="display:flex; align-items:center; gap:8px;">
                <button onclick="generarTabla()">Generar tabla</button>
                <button class="secondary" onclick="resetDefaults()">Reset</button>
            </div>
        </div>

        <!-- Tabla read-only -->
        <table id="tabla-resultados" aria-label="Resultados">
            <thead>
                <tr>
                    <th>PRODUCTO</th>
                    <th>PRECIO<br><span class="small">EFECTIVO (USD)</span></th>
                    <th>PRECIO PESOS<br><span class="small">(A DÓLAR BLUE VENTA)</span></th>
                    <th>PRECIO TRENSFERENCIA</th>
                    <th>IVA (10.5%)</th>
                    <th>IIBB (3,5%)</th>
                    <th>PRECIO FACTURADO<br><span class="small">(EFT/TRF)</span></th>
                    <th>EN 1 CUOTA</th>
                    <th>EN 3 CUOTAS</th>
                    <th>EN 6 CUOTAS</th>
                </tr>
            </thead>
            <tbody id="tbody-results">
                <!-- se completa dinámicamente -->
            </tbody>
        </table>

        <p class="small" style="margin-top:12px;">
            Notas: <strong>P. transferencia</strong> = pesos + transf %. <strong>P. Facturado</strong> = pesos + IVA +
            IIBB. Las cuotas aplican
            recargos: EN 1 = +10%, EN 3 = +25%, EN 6 = +35%.
        </p>
    </div>

    <script>
        // Formato de números (máx 2 decimales, no mostrar .00 innecesario)
        function fmt(n) {
            if (typeof n !== "number" || !isFinite(n)) return "-";
            // si es entero mostrar sin decimales, si tiene parte decimal mostrar hasta 2
            const opts = { minimumFractionDigits: 0, maximumFractionDigits: 2 };
            return n.toLocaleString('es-AR', opts);
        }

        function generarTabla() {
            const producto = document.getElementById('producto').value || '';
            const usd = parseFloat(document.getElementById('usd').value) || 0;
            const dolar = parseFloat(document.getElementById('dolar').value) || 1;
            const transferPct = (parseFloat(document.getElementById('transferPct').value) || 0) / 100;
            const ivaPct = (parseFloat(document.getElementById('ivaPct').value) || 0) / 100;
            const iibbPct = (parseFloat(document.getElementById('iibbPct').value) || 0) / 100;

            // Conversiones
            const precioPesos = usd * dolar;
            const precioTransferido = precioPesos * (1 + transferPct);

            // IVA e IIBB
            const iva = precioPesos * ivaPct;
            const iibb = precioPesos * iibbPct;

            // Precio facturado base
            const precioFacturado = precioPesos + iva + iibb;

            // multiplicadores de cuotas
            const mult1 = 1.10;
            const mult3 = 1.25;
            const mult6 = 1.35;

            const en1 = precioFacturado * mult1;
            const en3 = precioFacturado * mult3;
            const en6 = precioFacturado * mult6;

            // Calcular valor por cuota
            const cuota3 = en3 / 3;
            const cuota6 = en6 / 6;

            // Construir tabla
            const tbody = document.getElementById('tbody-results');
            tbody.innerHTML = ''; // limpiar

            // Fila principal
            const tr1 = document.createElement('tr');
            function td(text) {
                const c = document.createElement('td');
                c.textContent = text;
                return c;
            }

            tr1.appendChild(td(producto));
            tr1.appendChild(td(fmt(usd, 'USD')));                 // USD
            tr1.appendChild(td(fmt(precioPesos, 'ARS')));         // Pesos
            tr1.appendChild(td(fmt(precioTransferido, 'ARS')));   // Transferencia
            tr1.appendChild(td(fmt(iva, 'ARS')));                 // IVA
            tr1.appendChild(td(fmt(iibb, 'ARS')));                // IIBB
            tr1.appendChild(td(fmt(precioFacturado, 'ARS')));     // Facturado
            tr1.appendChild(td(fmt(en1, 'ARS')));                 // En 1
            tr1.appendChild(td(fmt(en3, 'ARS')));                 // En 3
            tr1.appendChild(td(fmt(en6, 'ARS')));                 // En 6

            // Fila adicional (valor por cuota)
            const tr2 = document.createElement('tr');
            const tdVacio = () => {
                const td = document.createElement('td');
                td.textContent = '';
                return td;
            };

            tr2.appendChild(tdVacio());
            tr2.appendChild(tdVacio());
            tr2.appendChild(tdVacio());
            tr2.appendChild(tdVacio());
            tr2.appendChild(tdVacio());
            tr2.appendChild(tdVacio());
            tr2.appendChild(tdVacio());
            const tdLabel = document.createElement('td');
            tdLabel.textContent = "Valor por cuota";
            tdLabel.style.fontWeight = "bold";
            tdLabel.style.textAlign = "right";
            tr2.appendChild(tdLabel);
            tr2.appendChild(td(fmt(cuota3, 'ARS')));
            tr2.appendChild(td(fmt(cuota6, 'ARS')));

            tbody.appendChild(tr1);
            tbody.appendChild(tr2);
        }


        // Inicializar con los valores por defecto al cargar
        window.addEventListener('DOMContentLoaded', () => {
            generarTabla();
        });

        function resetDefaults() {
            document.getElementById('usd').value = 500;
            document.getElementById('dolar').value = 1450;
            document.getElementById('producto').value = '';
            document.getElementById('transferPct').value = 3;
            document.getElementById('ivaPct').value = 10.5;
            document.getElementById('iibbPct').value = 3.5;
            generarTabla();
        }

        // Formateo con símbolo de moneda (usd o ars)
        function fmt(n, moneda = 'ARS') {
            if (typeof n !== "number" || !isFinite(n)) return "-";
            return n.toLocaleString('es-AR', {
                style: 'currency',
                currency: moneda,
                minimumFractionDigits: 0,
                maximumFractionDigits: 2
            });
        }
    </script>
</body>

</html>